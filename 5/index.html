<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Project 5A — Diffusion Models (CS180)</title>
  <meta name="description" content="Part A: Using pretrained DeepFloyd diffusion models for image generation and manipulation." />
  <style>
    :root{
      --bg:#f5f9ff; --ink:#0e1b2c; --muted:#5a6b82;
      --accent:#3b82f6; --accent-2:#60a5fa;
      --card:#ffffff; --border:#e6edf7;
      --shadow:0 10px 25px rgba(25,74,142,.12);
      --radius:18px; --max:1080px;
    }
    html,body{background:var(--bg); color:var(--ink); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, "Helvetica Neue", Arial}
    body{margin:0; padding:28px 18px 56px}
    .wrap{max-width:var(--max); margin:0 auto}
    a{color:var(--accent); text-decoration:none}
    header{margin-bottom:1rem}
    h1{font-size:clamp(1.6rem, 1.15rem + 2vw, 2.4rem); line-height:1.15; margin:.25rem 0}
    .pill{display:inline-block; padding:.25rem .6rem; border-radius:999px; border:1px solid rgba(59,130,246,.25); background:rgba(59,130,246,.12); color:#0b3a7a; font-weight:600; font-size:.85rem}
    .pill.green{border:1px solid rgba(34,197,94,.25); background:rgba(34,197,94,.12); color:#166534}

    .card{background:var(--card); border:1px solid var(--border); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow); margin:18px 0}
    .grid{display:grid; gap:14px}
    .two{grid-template-columns:1fr}
    .three{grid-template-columns:1fr}
    .four{grid-template-columns:1fr}
    .five{grid-template-columns:1fr}
    .six{grid-template-columns:1fr}
    @media(min-width:780px){ 
      .two{grid-template-columns:1fr 1fr} 
      .three{grid-template-columns:1fr 1fr 1fr}
      .four{grid-template-columns:repeat(4, 1fr)}
      .five{grid-template-columns:repeat(5, 1fr)}
      .six{grid-template-columns:repeat(6, 1fr)}
    }

    figure{margin:0}
    img{width:100%; height:auto; display:block; border-radius:14px; border:1px solid var(--border)}
    figcaption{margin-top:.4rem; color:var(--muted); font-size:.95rem}
    h2{margin:.25rem 0 .65rem; font-size:1.3rem}
    h3{margin:.25rem 0 .4rem; font-size:1.05rem}
    .hr{height:1px; background:var(--border); margin:1.5rem 0}
    footer{margin-top:2rem; color:var(--muted); font-size:.95rem}
    pre{background:#f3f6ff; border:1px solid #e6edf7; padding:.6rem .75rem; border-radius:10px; overflow:auto; font-size:.92rem; line-height:1.35}
    code{background:#eef4ff; border:1px solid #d7e5ff; padding:.1rem .25rem; border-radius:6px}
    .part-header{background:linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%); color:#fff; padding:1rem 1.25rem; border-radius:var(--radius); margin:2rem 0 1rem}
    .part-header h2{color:#fff; margin:0}
    @media print{ body{padding:0; background:#fff} .card{box-shadow:none} a[href]:after{content:""} }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <a href="/">← Back to Home</a>
      <h1>Programming Project #5A — The Power of Diffusion Models</h1>
      <span class="pill">CS180/280A</span>
      <p style="margin:.4rem 0 0; color:var(--muted)">
        Using pretrained DeepFloyd diffusion models for image generation, manipulation, and optical illusions.
        All images are shown directly on the page; assets are under <code>5/media/</code>.
      </p>
    </header>

    <!-- ========= Part 0 ========= -->
    <div class="part-header"><h2>Part 0 — Setup & Text Prompts</h2></div>

    <section class="card" id="part0">
      <h2>0.1 — Generated Images from Text Prompts</h2>
      <p>
        Using DeepFloyd IF to generate images from custom text prompts. The model uses T5 text embeddings
        and produces 64×64 images (Stage 1), which can be upsampled to 256×256 (Stage 2).
      </p>

      <h3>Generated Samples</h3>
      <div class="grid three">
        <figure><img src="media/0_1_prompt1.png" alt="Prompt 1">
          <figcaption>"[your prompt 1]"</figcaption>
        </figure>
        <figure><img src="media/0_1_prompt2.png" alt="Prompt 2">
          <figcaption>"[your prompt 2]"</figcaption>
        </figure>
        <figure><img src="media/0_1_prompt3.png" alt="Prompt 3">
          <figcaption>"[your prompt 3]"</figcaption>
        </figure>
      </div>

      <p style="margin-top:.8rem; color:var(--muted)">
        <strong>Random seed used:</strong> [your seed]<br>
        <strong>num_inference_steps tested:</strong> [e.g., 20, 50]
      </p>
    </section>

    <!-- ========= Part 1 ========= -->
    <div class="part-header"><h2>Part 1 — Sampling Loops</h2></div>

    <!-- ========= 1.1 ========= -->
    <section class="card" id="1-1">
      <h2>1.1 — Implementing the Forward Process</h2>
      <p>
        The forward process adds Gaussian noise to clean images according to:
        <code>x_t = √(ᾱ_t)·x_0 + √(1-ᾱ_t)·ε</code> where <code>ε ~ N(0, I)</code>.
      </p>

      <h3>Forward Process Equation</h3>
      <pre>
x_t = √(ᾱ_t) · x_0 + √(1-ᾱ_t) · ε

where:
  x_0 = clean image
  x_t = noisy image at timestep t
  ᾱ_t = noise schedule coefficient
  ε ~ N(0, I) = Gaussian noise
      </pre>

      <h3>Campanile at Different Noise Levels</h3>
      <div class="grid four">
        <figure><img src="media/1_1_original.png" alt="Original">
          <figcaption>Original (t=0)</figcaption>
        </figure>
        <figure><img src="media/1_1_t250.png" alt="t=250">
          <figcaption>t=250</figcaption>
        </figure>
        <figure><img src="media/1_1_t500.png" alt="t=500">
          <figcaption>t=500</figcaption>
        </figure>
        <figure><img src="media/1_1_t750.png" alt="t=750">
          <figcaption>t=750</figcaption>
        </figure>
      </div>
    </section>

    <!-- ========= 1.2 ========= -->
    <section class="card" id="1-2">
      <h2>1.2 — Classical Denoising with Gaussian Blur</h2>
      <p>
        Attempting to denoise using classical Gaussian blur filtering. Results demonstrate the
        limitations of traditional methods compared to learned diffusion models.
      </p>

      <div class="grid three">
        <figure><img src="media/1_2_noisy_t250.png" alt="Noisy 250">
          <figcaption>Noisy (t=250)</figcaption>
        </figure>
        <figure><img src="media/1_2_noisy_t500.png" alt="Noisy 500">
          <figcaption>Noisy (t=500)</figcaption>
        </figure>
        <figure><img src="media/1_2_noisy_t750.png" alt="Noisy 750">
          <figcaption>Noisy (t=750)</figcaption>
        </figure>
      </div>
      <div class="grid three" style="margin-top:.8rem">
        <figure><img src="media/1_2_gaussian_t250.png" alt="Gaussian 250">
          <figcaption>Gaussian Blur (t=250)</figcaption>
        </figure>
        <figure><img src="media/1_2_gaussian_t500.png" alt="Gaussian 500">
          <figcaption>Gaussian Blur (t=500)</figcaption>
        </figure>
        <figure><img src="media/1_2_gaussian_t750.png" alt="Gaussian 750">
          <figcaption>Gaussian Blur (t=750)</figcaption>
        </figure>
      </div>
    </section>

    <!-- ========= 1.3 ========= -->
    <section class="card" id="1-3">
      <h2>1.3 — One-Step Denoising</h2>
      <p>
        Using the pretrained UNet to estimate and remove noise in a single step:
        <code>x_0 = (x_t - √(1-ᾱ_t)·ε_θ(x_t, t)) / √(ᾱ_t)</code>
      </p>

      <div class="grid three">
        <figure><img src="media/1_3_original.png" alt="Original">
          <figcaption>Original</figcaption>
        </figure>
        <figure><img src="media/1_3_noisy_t250.png" alt="Noisy 250">
          <figcaption>Noisy (t=250)</figcaption>
        </figure>
        <figure><img src="media/1_3_denoised_t250.png" alt="Denoised 250">
          <figcaption>One-Step Denoised</figcaption>
        </figure>
      </div>
      <div class="grid three" style="margin-top:.8rem">
        <figure><img src="media/1_3_original.png" alt="Original">
          <figcaption>Original</figcaption>
        </figure>
        <figure><img src="media/1_3_noisy_t500.png" alt="Noisy 500">
          <figcaption>Noisy (t=500)</figcaption>
        </figure>
        <figure><img src="media/1_3_denoised_t500.png" alt="Denoised 500">
          <figcaption>One-Step Denoised</figcaption>
        </figure>
      </div>
      <div class="grid three" style="margin-top:.8rem">
        <figure><img src="media/1_3_original.png" alt="Original">
          <figcaption>Original</figcaption>
        </figure>
        <figure><img src="media/1_3_noisy_t750.png" alt="Noisy 750">
          <figcaption>Noisy (t=750)</figcaption>
        </figure>
        <figure><img src="media/1_3_denoised_t750.png" alt="Denoised 750">
          <figcaption>One-Step Denoised</figcaption>
        </figure>
      </div>
    </section>

    <!-- ========= 1.4 ========= -->
    <section class="card" id="1-4">
      <h2>1.4 — Iterative Denoising</h2>
      <p>
        Implementing the full DDPM iterative denoising process with strided timesteps (990, 960, ..., 30, 0).
        Starting from i_start=10, we progressively remove noise over multiple steps.
      </p>

      <h3>Denoising Progression (Every 5th Step)</h3>
      <div class="grid six">
        <figure><img src="media/1_4_step0.png" alt="Step 0">
          <figcaption>Initial (t=990)</figcaption>
        </figure>
        <figure><img src="media/1_4_step5.png" alt="Step 5">
          <figcaption>Step 5</figcaption>
        </figure>
        <figure><img src="media/1_4_step10.png" alt="Step 10">
          <figcaption>Step 10</figcaption>
        </figure>
        <figure><img src="media/1_4_step15.png" alt="Step 15">
          <figcaption>Step 15</figcaption>
        </figure>
        <figure><img src="media/1_4_step20.png" alt="Step 20">
          <figcaption>Step 20</figcaption>
        </figure>
        <figure><img src="media/1_4_step25.png" alt="Step 25">
          <figcaption>Step 25</figcaption>
        </figure>
      </div>

      <h3 style="margin-top:1rem">Method Comparison</h3>
      <div class="grid four">
        <figure><img src="media/1_4_original.png" alt="Original">
          <figcaption>Original</figcaption>
        </figure>
        <figure><img src="media/1_4_iterative.png" alt="Iterative">
          <figcaption>Iterative Denoising</figcaption>
        </figure>
        <figure><img src="media/1_4_onestep.png" alt="One-step">
          <figcaption>One-Step Denoising</figcaption>
        </figure>
        <figure><img src="media/1_4_gaussian.png" alt="Gaussian">
          <figcaption>Gaussian Blur</figcaption>
        </figure>
      </div>
    </section>

    <!-- ========= 1.5 ========= -->
    <section class="card" id="1-5">
      <h2>1.5 — Diffusion Model Sampling</h2>
      <p>
        Generating images from pure noise by running iterative denoising from t=990 to t=0.
        Using prompt: "a high quality photo"
      </p>

      <div class="grid five">
        <figure><img src="media/1_5_sample1.png" alt="Sample 1">
          <figcaption>Sample 1</figcaption>
        </figure>
        <figure><img src="media/1_5_sample2.png" alt="Sample 2">
          <figcaption>Sample 2</figcaption>
        </figure>
        <figure><img src="media/1_5_sample3.png" alt="Sample 3">
          <figcaption>Sample 3</figcaption>
        </figure>
        <figure><img src="media/1_5_sample4.png" alt="Sample 4">
          <figcaption>Sample 4</figcaption>
        </figure>
        <figure><img src="media/1_5_sample5.png" alt="Sample 5">
          <figcaption>Sample 5</figcaption>
        </figure>
      </div>
    </section>

    <!-- ========= 1.6 ========= -->
    <section class="card" id="1-6">
      <h2>1.6 — Classifier-Free Guidance (CFG)</h2>
      <p>
        Improving sample quality using CFG with guidance scale γ=7.
        Formula: <code>ε = ε_u + γ(ε_c - ε_u)</code>
      </p>

      <h3>CFG Algorithm</h3>
      <pre>
ε_c = conditional noise estimate (with prompt)
ε_u = unconditional noise estimate (empty prompt)
ε = ε_u + γ(ε_c - ε_u)

γ = 7 (guidance scale)
      </pre>

      <div class="grid five">
        <figure><img src="media/1_6_cfg_sample1.png" alt="CFG Sample 1">
          <figcaption>Sample 1 (CFG)</figcaption>
        </figure>
        <figure><img src="media/1_6_cfg_sample2.png" alt="CFG Sample 2">
          <figcaption>Sample 2 (CFG)</figcaption>
        </figure>
        <figure><img src="media/1_6_cfg_sample3.png" alt="CFG Sample 3">
          <figcaption>Sample 3 (CFG)</figcaption>
        </figure>
        <figure><img src="media/1_6_cfg_sample4.png" alt="CFG Sample 4">
          <figcaption>Sample 4 (CFG)</figcaption>
        </figure>
        <figure><img src="media/1_6_cfg_sample5.png" alt="CFG Sample 5">
          <figcaption>Sample 5 (CFG)</figcaption>
        </figure>
      </div>

      <p style="margin-top:.6rem; color:var(--muted)">
        <strong>Observation:</strong> CFG dramatically improves image quality compared to Part 1.5.
      </p>
    </section>

    <!-- ========= 1.7 ========= -->
    <section class="card" id="1-7">
      <h2>1.7 — Image-to-Image Translation (SDEdit)</h2>
      <p>
        Adding noise to real images and denoising to create edits. Lower i_start values allow
        more creative changes; higher values preserve more of the original.
      </p>

      <h3>Campanile Edits</h3>
      <div class="grid six">
        <figure><img src="media/1_7_campanile_i1.png" alt="i=1">
          <figcaption>i_start=1</figcaption>
        </figure>
        <figure><img src="media/1_7_campanile_i3.png" alt="i=3">
          <figcaption>i_start=3</figcaption>
        </figure>
        <figure><img src="media/1_7_campanile_i5.png" alt="i=5">
          <figcaption>i_start=5</figcaption>
        </figure>
        <figure><img src="media/1_7_campanile_i7.png" alt="i=7">
          <figcaption>i_start=7</figcaption>
        </figure>
        <figure><img src="media/1_7_campanile_i10.png" alt="i=10">
          <figcaption>i_start=10</figcaption>
        </figure>
        <figure><img src="media/1_7_campanile_i20.png" alt="i=20">
          <figcaption>i_start=20</figcaption>
        </figure>
      </div>

      <h3 style="margin-top:1rem">Custom Image 1 Edits</h3>
      <div class="grid six">
        <figure><img src="media/1_7_custom1_i1.png" alt="i=1"><figcaption>i_start=1</figcaption></figure>
        <figure><img src="media/1_7_custom1_i3.png" alt="i=3"><figcaption>i_start=3</figcaption></figure>
        <figure><img src="media/1_7_custom1_i5.png" alt="i=5"><figcaption>i_start=5</figcaption></figure>
        <figure><img src="media/1_7_custom1_i7.png" alt="i=7"><figcaption>i_start=7</figcaption></figure>
        <figure><img src="media/1_7_custom1_i10.png" alt="i=10"><figcaption>i_start=10</figcaption></figure>
        <figure><img src="media/1_7_custom1_i20.png" alt="i=20"><figcaption>i_start=20</figcaption></figure>
      </div>

      <h3 style="margin-top:1rem">Custom Image 2 Edits</h3>
      <div class="grid six">
        <figure><img src="media/1_7_custom2_i1.png" alt="i=1"><figcaption>i_start=1</figcaption></figure>
        <figure><img src="media/1_7_custom2_i3.png" alt="i=3"><figcaption>i_start=3</figcaption></figure>
        <figure><img src="media/1_7_custom2_i5.png" alt="i=5"><figcaption>i_start=5</figcaption></figure>
        <figure><img src="media/1_7_custom2_i7.png" alt="i=7"><figcaption>i_start=7</figcaption></figure>
        <figure><img src="media/1_7_custom2_i10.png" alt="i=10"><figcaption>i_start=10</figcaption></figure>
        <figure><img src="media/1_7_custom2_i20.png" alt="i=20"><figcaption>i_start=20</figcaption></figure>
      </div>
    </section>

    <!-- ========= 1.7.1 ========= -->
    <section class="card" id="1-7-1">
      <h2>1.7.1 — Editing Hand-Drawn and Web Images</h2>
      <p>
        Projecting non-realistic images (sketches, web images) onto the natural image manifold.
      </p>

      <h3>Web Image Edits</h3>
      <div class="grid six">
        <figure><img src="media/1_7_1_web_i1.png" alt="i=1"><figcaption>i_start=1</figcaption></figure>
        <figure><img src="media/1_7_1_web_i3.png" alt="i=3"><figcaption>i_start=3</figcaption></figure>
        <figure><img src="media/1_7_1_web_i5.png" alt="i=5"><figcaption>i_start=5</figcaption></figure>
        <figure><img src="media/1_7_1_web_i7.png" alt="i=7"><figcaption>i_start=7</figcaption></figure>
        <figure><img src="media/1_7_1_web_i10.png" alt="i=10"><figcaption>i_start=10</figcaption></figure>
        <figure><img src="media/1_7_1_web_i20.png" alt="i=20"><figcaption>i_start=20</figcaption></figure>
      </div>

      <h3 style="margin-top:1rem">Hand-Drawn Image 1</h3>
      <div class="grid six">
        <figure><img src="media/1_7_1_draw1_i1.png" alt="i=1"><figcaption>i_start=1</figcaption></figure>
        <figure><img src="media/1_7_1_draw1_i3.png" alt="i=3"><figcaption>i_start=3</figcaption></figure>
        <figure><img src="media/1_7_1_draw1_i5.png" alt="i=5"><figcaption>i_start=5</figcaption></figure>
        <figure><img src="media/1_7_1_draw1_i7.png" alt="i=7"><figcaption>i_start=7</figcaption></figure>
        <figure><img src="media/1_7_1_draw1_i10.png" alt="i=10"><figcaption>i_start=10</figcaption></figure>
        <figure><img src="media/1_7_1_draw1_i20.png" alt="i=20"><figcaption>i_start=20</figcaption></figure>
      </div>

      <h3 style="margin-top:1rem">Hand-Drawn Image 2</h3>
      <div class="grid six">
        <figure><img src="media/1_7_1_draw2_i1.png" alt="i=1"><figcaption>i_start=1</figcaption></figure>
        <figure><img src="media/1_7_1_draw2_i3.png" alt="i=3"><figcaption>i_start=3</figcaption></figure>
        <figure><img src="media/1_7_1_draw2_i5.png" alt="i=5"><figcaption>i_start=5</figcaption></figure>
        <figure><img src="media/1_7_1_draw2_i7.png" alt="i=7"><figcaption>i_start=7</figcaption></figure>
        <figure><img src="media/1_7_1_draw2_i10.png" alt="i=10"><figcaption>i_start=10</figcaption></figure>
        <figure><img src="media/1_7_1_draw2_i20.png" alt="i=20"><figcaption>i_start=20</figcaption></figure>
      </div>
    </section>

    <!-- ========= 1.7.2 ========= -->
    <section class="card" id="1-7-2">
      <h2>1.7.2 — Inpainting (RePaint)</h2>
      <p>
        Filling masked regions while preserving unmasked areas using the RePaint algorithm:
        <code>x_t ← m·x_t + (1-m)·forward(x_orig, t)</code>
      </p>

      <h3>Campanile Inpainting</h3>
      <div class="grid three">
        <figure><img src="media/1_7_2_campanile_original.png" alt="Original">
          <figcaption>Original</figcaption>
        </figure>
        <figure><img src="media/1_7_2_campanile_mask.png" alt="Mask">
          <figcaption>Mask</figcaption>
        </figure>
        <figure><img src="media/1_7_2_campanile_inpaint.png" alt="Inpainted">
          <figcaption>Inpainted Result</figcaption>
        </figure>
      </div>

      <h3 style="margin-top:1rem">Custom Inpainting 1</h3>
      <div class="grid three">
        <figure><img src="media/1_7_2_custom1_original.png" alt="Original">
          <figcaption>Original</figcaption>
        </figure>
        <figure><img src="media/1_7_2_custom1_mask.png" alt="Mask">
          <figcaption>Mask</figcaption>
        </figure>
        <figure><img src="media/1_7_2_custom1_inpaint.png" alt="Inpainted">
          <figcaption>Inpainted Result</figcaption>
        </figure>
      </div>

      <h3 style="margin-top:1rem">Custom Inpainting 2</h3>
      <div class="grid three">
        <figure><img src="media/1_7_2_custom2_original.png" alt="Original">
          <figcaption>Original</figcaption>
        </figure>
        <figure><img src="media/1_7_2_custom2_mask.png" alt="Mask">
          <figcaption>Mask</figcaption>
        </figure>
        <figure><img src="media/1_7_2_custom2_inpaint.png" alt="Inpainted">
          <figcaption>Inpainted Result</figcaption>
        </figure>
      </div>
    </section>

    <!-- ========= 1.7.3 ========= -->
    <section class="card" id="1-7-3">
      <h2>1.7.3 — Text-Conditional Image-to-Image Translation</h2>
      <p>
        Combining SDEdit with custom text prompts to guide the editing process.
      </p>

      <h3>Campanile Text-Guided Edits</h3>
      <p style="color:var(--muted); margin-bottom:.8rem">Prompt: "[your prompt]"</p>
      <div class="grid six">
        <figure><img src="media/1_7_3_campanile_i1.png" alt="i=1"><figcaption>i_start=1</figcaption></figure>
        <figure><img src="media/1_7_3_campanile_i3.png" alt="i=3"><figcaption>i_start=3</figcaption></figure>
        <figure><img src="media/1_7_3_campanile_i5.png" alt="i=5"><figcaption>i_start=5</figcaption></figure>
        <figure><img src="media/1_7_3_campanile_i7.png" alt="i=7"><figcaption>i_start=7</figcaption></figure>
        <figure><img src="media/1_7_3_campanile_i10.png" alt="i=10"><figcaption>i_start=10</figcaption></figure>
        <figure><img src="media/1_7_3_campanile_i20.png" alt="i=20"><figcaption>i_start=20</figcaption></figure>
      </div>

      <h3 style="margin-top:1rem">Custom Image 1 Text-Guided Edits</h3>
      <p style="color:var(--muted); margin-bottom:.8rem">Prompt: "[your prompt]"</p>
      <div class="grid six">
        <figure><img src="media/1_7_3_custom1_i1.png" alt="i=1"><figcaption>i_start=1</figcaption></figure>
        <figure><img src="media/1_7_3_custom1_i3.png" alt="i=3"><figcaption>i_start=3</figcaption></figure>
        <figure><img src="media/1_7_3_custom1_i5.png" alt="i=5"><figcaption>i_start=5</figcaption></figure>
        <figure><img src="media/1_7_3_custom1_i7.png" alt="i=7"><figcaption>i_start=7</figcaption></figure>
        <figure><img src="media/1_7_3_custom1_i10.png" alt="i=10"><figcaption>i_start=10</figcaption></figure>
        <figure><img src="media/1_7_3_custom1_i20.png" alt="i=20"><figcaption>i_start=20</figcaption></figure>
      </div>

      <h3 style="margin-top:1rem">Custom Image 2 Text-Guided Edits</h3>
      <p style="color:var(--muted); margin-bottom:.8rem">Prompt: "[your prompt]"</p>
      <div class="grid six">
        <figure><img src="media/1_7_3_custom2_i1.png" alt="i=1"><figcaption>i_start=1</figcaption></figure>
        <figure><img src="media/1_7_3_custom2_i3.png" alt="i=3"><figcaption>i_start=3</figcaption></figure>
        <figure><img src="media/1_7_3_custom2_i5.png" alt="i=5"><figcaption>i_start=5</figcaption></figure>
        <figure><img src="media/1_7_3_custom2_i7.png" alt="i=7"><figcaption>i_start=7</figcaption></figure>
        <figure><img src="media/1_7_3_custom2_i10.png" alt="i=10"><figcaption>i_start=10</figcaption></figure>
        <figure><img src="media/1_7_3_custom2_i20.png" alt="i=20"><figcaption>i_start=20</figcaption></figure>
      </div>
    </section>

    <!-- ========= 1.8 ========= -->
    <section class="card" id="1-8">
      <h2>1.8 — Visual Anagrams</h2>
      <p>
        Creating optical illusions that reveal different images when flipped upside down.
        Algorithm: <code>ε = (ε_1 + flip(ε_2)) / 2</code>
      </p>

      <h3>Visual Anagram Algorithm</h3>
      <pre>
for each denoising step:
  ε_1 = UNet(x_t, prompt_1)          # noise for prompt 1
  ε_2 = UNet(flip(x_t), prompt_2)    # noise for flipped image
  ε = (ε_1 + flip(ε_2)) / 2         # average noise estimates
  x_t ← denoise_step(x_t, ε)         # denoise with averaged noise
      </pre>

      <h3>Anagram 1</h3>
      <div class="grid two">
        <figure><img src="media/1_8_anagram1_normal.png" alt="Normal 1">
          <figcaption>Normal: "[prompt 1]"</figcaption>
        </figure>
        <figure><img src="media/1_8_anagram1_flipped.png" alt="Flipped 1">
          <figcaption>Flipped: "[prompt 2]"</figcaption>
        </figure>
      </div>

      <h3 style="margin-top:1rem">Anagram 2</h3>
      <div class="grid two">
        <figure><img src="media/1_8_anagram2_normal.png" alt="Normal 2">
          <figcaption>Normal: "[prompt 1]"</figcaption>
        </figure>
        <figure><img src="media/1_8_anagram2_flipped.png" alt="Flipped 2">
          <figcaption>Flipped: "[prompt 2]"</figcaption>
        </figure>
      </div>
    </section>

    <!-- ========= 1.9 ========= -->
    <section class="card" id="1-9">
      <h2>1.9 — Hybrid Images with Diffusion</h2>
      <p>
        Creating hybrid images by combining low frequencies from one prompt with high frequencies from another.
        Algorithm: <code>ε = f_lowpass(ε_1) + f_highpass(ε_2)</code>
      </p>

      <h3>Hybrid Image Algorithm</h3>
      <pre>
for each denoising step:
  ε_1 = UNet(x_t, prompt_1)
  ε_2 = UNet(x_t, prompt_2)
  
  # Gaussian blur with kernel_size=33, sigma=2
  ε_low = gaussian_blur(ε_1)
  ε_high = ε_2 - gaussian_blur(ε_2)
  
  ε = ε_low + ε_high
  x_t ← denoise_step(x_t, ε)
      </pre>

      <h3>Hybrid 1</h3>
      <figure><img src="media/1_9_hybrid1.png" alt="Hybrid 1">
        <figcaption>Low freq: "[prompt 1]" + High freq: "[prompt 2]"</figcaption>
      </figure>

      <h3 style="margin-top:1rem">Hybrid 2</h3>
      <figure><img src="media/1_9_hybrid2.png" alt="Hybrid 2">
        <figcaption>Low freq: "[prompt 1]" + High freq: "[prompt 2]"</figcaption>
      </figure>

      <p style="margin-top:.6rem; color:var(--muted)">
        <strong>Effect:</strong> View close up to see high-frequency details, step back to see low-frequency structure.
      </p>
    </section>

    <footer>
      <div class="hr"></div>
      <p>
        <strong>Coolest Thing Learned:</strong> Diffusion models can create optical illusions (visual anagrams)
        and hybrid images by manipulating noise estimates in creative ways. The ability to average predictions
        from different prompts or transformations demonstrates the incredible flexibility of these models.
      </p>
      <div class="hr" style="margin-top:1rem"></div>
      <p>© <span id="year"></span> Raymond Wang • <a href="https://raymond23101.github.io">raymond23101.github.io</a></p>
    </footer>
  </div>
  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
</body>
</html>
